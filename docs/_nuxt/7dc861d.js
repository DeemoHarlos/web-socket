(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{348:function(e,t,n){var content=n(350);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(121).default)("4e77d78c",content,!0,{sourceMap:!1})},349:function(e,t,n){"use strict";n(348)},350:function(e,t,n){var r=n(120)(!1);r.push([e.i,".flex-column[data-v-0bae0162],.flex-row[data-v-0bae0162]{display:flex}.middle-center[data-v-0bae0162]{justify-content:center;align-items:center}.stretch-center[data-v-0bae0162]{justify-content:center;align-items:stretch}.fill-screen[data-v-0bae0162]{width:100%;height:100vh}#messages[data-v-0bae0162]{word-wrap:break-word;overflow-y:auto}#messages #messages-wrap[data-v-0bae0162]{min-height:100%;justify-content:flex-end}#username-prompt[data-v-0bae0162]{background:rgba(0,0,0,.56471)}#username-prompt>div[data-v-0bae0162]{width:480px}",""]),e.exports=r},354:function(e,t,n){"use strict";n.r(t);n(23),n(13),n(25),n(43),n(42);var r,l,o,c=n(140);!function(e){e.BroadcastMessage="message",e.ErrorMessage="error"}(r||(r={})),function(e){e.UsernameAlreadyUsed="UsernameAlreadyUsed"}(l||(l={})),function(e){e.SetUsername="username",e.SendMessage="message"}(o||(o={}));var m=Object(c.a)({name:"IndexPage",setup:function(){var e=Object(c.f)(),t=e.$io,n=e.$cookies,m=Object(c.d)(null),d=Object(c.d)([]),v=Object(c.d)(""),f=Object(c.d)(""),x=Object(c.d)(""),w=Object(c.d)(""),h=Object(c.d)(!1);return Object(c.c)((function(){t.on(r.BroadcastMessage,(function(data){d.value.push(data),setTimeout((function(){var e;null===(e=m.value)||void 0===e||e.scrollTo(0,m.value.scrollHeight)}),0)})),t.on(r.ErrorMessage,(function(data){console.log(data.error),console.log(l.UsernameAlreadyUsed),data.error===l.UsernameAlreadyUsed&&(v.value="?",h.value=!0,w.value="Someone already used the name!")}));var e=n.get("username");e?(t.emit(o.SetUsername,e),v.value=e,f.value=e):h.value=!0})),{messagesContainer:m,messages:d,username:v,newUsername:f,msg:x,errorText:w,showUsernamePrompt:h,sendMessage:function(e){e.preventDefault(),x.value&&(t.emit(o.SendMessage,x.value),x.value="")},setUsername:function(e){e.preventDefault();var r=f.value.replace(/\W/g,"").slice(0,32);r?(h.value=!1,r!==v.value&&(v.value=r,f.value=r,t.emit(o.SetUsername,r),h.value=!1,w.value="",n.set("username",r,{path:"/",maxAge:604800}))):w.value="Username can only contain alphabets, numbers and underscores."},onUsernameClick:function(e){e.preventDefault(),h.value=!0},onTextChange:function(){x.value.length>100&&(x.value=x.value.slice(0,100)),x.value=x.value.trim()}}}}),d=(n(349),n(88)),component=Object(d.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex-column vh-100 bg-dark text-light"},[n("div",{ref:"messagesContainer",staticClass:"flex-fill",attrs:{id:"messages"}},[n("div",{staticClass:"flex-column px-3 py-2",attrs:{id:"messages-wrap"}},e._l(e.messages,(function(t){return n("div",{staticClass:"message text-break my-1"},[n("span",{staticClass:"text-warning mr-2"},[n("b",[e._v(e._s(t.username))])]),n("span",[e._v(e._s(t.message))])])})),0)]),n("form",{staticClass:"flex-row p-2 bg-secondary",on:{submit:e.sendMessage}},[n("div",{staticClass:"btn btn-warning",on:{click:e.onUsernameClick}},[e._v(e._s(e.username))]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.msg,expression:"msg"}],staticClass:"flex-fill",attrs:{type:"text"},domProps:{value:e.msg},on:{change:e.onTextChange,input:function(t){t.target.composing||(e.msg=t.target.value)}}}),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.sendMessage}},[e._v("SEND")])]),e.showUsernamePrompt?n("div",{staticClass:"position-fixed d-flex middle-center w-100 vh-100",attrs:{id:"username-prompt"}},[n("div",{staticClass:"bg-secondary rounded p-4"},[n("div",[e._v("Please enter your username")]),n("form",{staticClass:"flex-row",on:{submit:e.setUsername}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newUsername,expression:"newUsername"}],staticClass:"flex-fill",attrs:{type:"text"},domProps:{value:e.newUsername},on:{input:function(t){t.target.composing||(e.newUsername=t.target.value)}}}),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.setUsername}},[e._v("CONFIRM")])]),n("div",{staticClass:"text-danger"},[e._v(e._s(e.errorText))])])]):e._e()])}),[],!1,null,"0bae0162",null);t.default=component.exports}}]);